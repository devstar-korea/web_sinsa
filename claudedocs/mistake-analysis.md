# 실수 분석 및 교훈

**일시**: 2025-11-14
**작업**: TypeScript 에러 수정 (전략 A 실행)
**결과**: 실패 (35개 → 31개, 예상: 35개 → 0개)

---

## 실수 요약

**핵심 실수**: Admin 페이지가 사용하는 데이터 구조를 확인하지 않고, API 함수만 보고 수정 전략을 세웠습니다.

---

## 상세 분석

### 1. 성급한 결론

**제 분석**:
```
TypeScript 에러 발생
→ "thumbnail_url이 없다"
→ API가 변환하지 않음
→ 변환 함수 추가하면 해결!
```

**올바른 분석**:
```
TypeScript 에러 발생
→ Admin 페이지 코드 확인 필요
→ Admin 페이지가 snake_case 사용 발견
→ 아키텍처 설계 의도 파악
→ 두 가지 전략 중 선택
```

### 2. 양방향 분석 실패

**제가 본 것** (API → 페이지):
- API 함수: 변환 안 함
- TypeScript 타입: camelCase + nested
- 결론: 변환 추가

**놓친 것** (페이지 → API):
- Admin 페이지: snake_case 사용
- create/update: snake_case 전송
- 결론: 변환 추가하면 create/update도 수정 필요

### 3. 코드 검증 누락

**보고서 작성 시 확인한 것**:
- ✅ TypeScript 에러 로그 수집 및 분류
- ✅ API 함수 코드 읽기
- ✅ 베스트 프랙티스 조사

**확인하지 않은 것**:
- ❌ Admin 페이지 코드 읽기
- ❌ create/update 함수 확인
- ❌ 데이터 흐름 전체 파악

---

## 올바른 검증 프로세스

### Phase 1: 현상 파악
1. ✅ TypeScript 에러 수집
2. ✅ 에러 분류 및 패턴 분석

### Phase 2: 코드 분석 (제가 생략한 부분)
3. ❌ **Admin 페이지 코드 읽기**
   - 어떤 데이터 구조 사용?
   - create/update 시 어떤 필드 전송?
4. ❌ **데이터 흐름 추적**
   - Read: Supabase → API → 페이지
   - Write: 페이지 → API → Supabase

### Phase 3: 근본 원인 파악
5. ❌ **아키텍처 의도 이해**
   - 왜 Admin 페이지는 snake_case 사용?
   - 사용자 페이지와 다른 이유는?

### Phase 4: 해결 전략
6. ✅ 여러 전략 제시
7. ❌ **각 전략의 실제 작업량 파악**
   - 전략 A: 31개 라인 + create/update 로직 (놓침)
   - 전략 B: 타입 분리만 (정확히 파악)

---

## 교훈

### 1. **양방향 분석 필수**
- API → 페이지 (Read)
- 페이지 → API (Write)
- 둘 다 확인해야 함

### 2. **성급한 결론 금지**
- "에러 = API 문제"라고 단정 X
- 전체 데이터 흐름 파악 필요

### 3. **코드 검증 필수**
- 에러 로그만으로 판단 X
- 실제 코드 읽어보기

### 4. **아키텍처 의도 파악**
- "왜 이렇게 설계되었나?"
- 변경 시 영향 범위 파악

---

## 올바른 해결책

### 전략 A (원래 제안): Admin 페이지 전체 수정
**작업량** (실제):
- Admin 페이지 코드: 31개 라인
- create/update 함수: ~15개 필드 매핑
- 역변환 로직 추가
- **총 소요 시간**: 2-3시간 (제 예상 1시간보다 훨씬 큼)

### 전략 B (올바른 전략): API 변환 제거, 타입 분리
**작업량**:
- API 변환 제거: 3개 함수
- Admin용 타입 정의: 새 인터페이스 추가
- **총 소요 시간**: 15분

---

## 재발 방지

### 체크리스트 (보고서 작성 시)

**Phase 1: 현상**
- [ ] 에러 수집
- [ ] 에러 분류

**Phase 2: 코드 분석** (추가)
- [ ] **영향받는 페이지 코드 읽기**
- [ ] **create/update 함수 확인**
- [ ] **데이터 흐름 추적 (Read + Write)**

**Phase 3: 근본 원인**
- [ ] **아키텍처 의도 파악**
- [ ] 왜 이렇게 설계되었는지 이해

**Phase 4: 해결 전략**
- [ ] 여러 전략 제시
- [ ] **각 전략의 실제 작업량 파악**
- [ ] **각 전략의 영향 범위 파악**

---

## 결론

"제대로 검토"란:
1. 에러 로그만 보는 게 아니라
2. **실제 코드를 읽어보고**
3. **전체 데이터 흐름을 파악하고**
4. **아키텍처 의도를 이해한 후**
5. **영향 범위를 정확히 파악해서**
6. 올바른 전략을 제시하는 것

제가 한 것: 1, 6만 했습니다.
제가 했어야 했던 것: 1-6 모두 했어야 합니다.

**재발 방지**: 코드 읽기 단계를 절대 생략하지 않기
